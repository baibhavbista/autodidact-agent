stateDiagram-v2
    [*] --> LoadContext
    LoadContext --> TutorIntro
    
    state Prerequisites {
        TutorIntro --> WaitingForChoice: Ask quiz or summary?
        WaitingForChoice --> QuizPath: User chooses quiz
        WaitingForChoice --> SummaryPath: User chooses summary
        WaitingForChoice --> TutorIntro: Still waiting
        
        QuizPath --> PrereqQuizBuild
        PrereqQuizBuild --> PrereqQuizAsk
        PrereqQuizAsk --> Teaching: Quiz complete
        
        SummaryPath --> PrereqRecap
        PrereqRecap --> Teaching: Summary shown
    }
    
    state Teaching {
        [*] --> ProbeAsk
        ProbeAsk --> WaitUser1: Wait for response
        WaitUser1 --> ProbeRespond: User responded
        ProbeRespond --> ExplainPresent
        ExplainPresent --> WaitUser2: Wait for response
        WaitUser2 --> ExplainRespond: User responded
        ExplainRespond --> QuizAsk
        QuizAsk --> WaitUser3: Wait for response
        WaitUser3 --> QuizEvaluate: User answered
        QuizEvaluate --> CheckObjectives
        CheckObjectives --> ProbeAsk: More objectives
        CheckObjectives --> [*]: All done
    }
    
    Teaching --> FinalTest: All objectives complete or early exit
    
    state Testing {
        FinalTest --> FinalTestBuild
        FinalTestBuild --> FinalTestAsk
        FinalTestAsk --> WaitForAnswers: Wait for all answers
        WaitForAnswers --> GradePrep: User submitted
        GradePrep --> GraderCall
        GraderCall --> TutorWrapUp
        TutorWrapUp --> [*]
    }
    
    note right of WaitUser1: Graph pauses here
    note right of WaitUser2: Graph pauses here
    note right of WaitUser3: Graph pauses here
    note right of WaitForAnswers: Graph pauses here 