flowchart TD
    Start([Start]) --> LC[load_context]
    LC --> TI[tutor_intro]
    
    TI -->|should_do_prerequisites| CondPrereq{Prerequisites<br/>Decision}
    CondPrereq -->|skip<br/>no prerequisites| TL[tutor_loop]
    CondPrereq -->|quiz<br/>user chose quiz| PQB[prereq_quiz_build]
    CondPrereq -->|summary<br/>user chose summary| PR[prereq_recap]
    CondPrereq -->|waiting<br/>awaiting choice| TI
    
    PQB --> PQA[prereq_quiz_ask]
    PQA --> TL
    PR --> TL
    
    TL -->|should_continue_teaching| CondTeach{Teaching<br/>Decision}
    CondTeach -->|continue<br/>more objectives| TL
    CondTeach -->|finish<br/>all done or early exit| FTB[final_test_build]
    CondTeach -->|wait_for_input<br/>awaiting user| End1([End - Wait for Input])
    
    FTB --> FTA[final_test_ask]
    FTA --> GP[grade_prep]
    GP --> GC[grader_call]
    GC --> TWU[tutor_wrap_up]
    TWU --> End2([End Session])
    
    style LC fill:#f9f,stroke:#333,stroke-width:2px
    style TL fill:#bbf,stroke:#333,stroke-width:4px
    style CondPrereq fill:#ff9,stroke:#333,stroke-width:2px
    style CondTeach fill:#ff9,stroke:#333,stroke-width:2px
    style GC fill:#9f9,stroke:#333,stroke-width:2px
    style End1 fill:#fcc,stroke:#333,stroke-width:2px
    style End2 fill:#cfc,stroke:#333,stroke-width:2px 